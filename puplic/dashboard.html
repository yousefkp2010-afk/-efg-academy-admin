<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - EFG Academy</title>
    <style>
        :root {
            --primary-blue: #0d1b36;
            --accent-blue: #1e3a8a;
            --gold: #d4af37;
            --light-bg: #f8fafc;
            --white: #ffffff;
            --text-dark: #1e293b;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --success: #10b981;
            --error: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light-bg);
            color: var(--text-dark);
        }

        .header {
            background: var(--primary-blue);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(13, 27, 54, 0.1);
        }

        .nav-tabs {
            background: var(--white);
            padding: 0 2rem;
            display: flex;
            gap: 2rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .nav-tab {
            padding: 1rem 0;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            color: var(--accent-blue);
        }

        .nav-tab.active {
            border-bottom-color: var(--gold);
            color: var(--primary-blue);
            font-weight: bold;
        }

        .content {
            padding: 2rem;
            min-height: calc(100vh - 140px);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        .logout-btn {
            background: var(--gold);
            color: var(--primary-blue);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #b8941f;
            transform: translateY(-2px);
        }

        /* Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .form-container {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(13, 27, 54, 0.1);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-blue);
        }

        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-family: inherit;
            transition: border 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--gold);
            color: var(--primary-blue);
        }

        .btn-primary:hover {
            background: #b8941f;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--error);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .data-list {
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(13, 27, 54, 0.1);
            overflow: hidden;
        }

        .data-item {
            padding: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .data-item:last-child {
            border-bottom: none;
        }

        .data-item:hover {
            background: var(--light-bg);
        }

        .data-content h4 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
        }

        .data-content p {
            color: var(--gray);
            margin-bottom: 0.5rem;
        }

        .data-meta {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .data-actions {
            display: flex;
            gap: 0.5rem;
        }

        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… EFG Academy</h1>
        <a href="/admin/logout" class="logout-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
    </div>
    
    <div class="nav-tabs">
        <div class="nav-tab active" data-tab="news">ğŸ“° Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</div>
        <div class="nav-tab" data-tab="courses">ğŸ“š Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</div>
        <div class="nav-tab" data-tab="lessons">ğŸ“ Ø§Ù„Ø¯Ø±ÙˆØ³</div>
        <div class="nav-tab" data-tab="notifications">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</div>
    </div>

    <div class="content">
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
        <div id="news" class="tab-content active">
            <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
            
            <div class="form-container">
                <h3>Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯</h3>
                <form id="newsForm">
                    <div class="form-group">
                        <label for="newsTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±:</label>
                        <input type="text" id="newsTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="newsDescription">ÙˆØµÙ Ø§Ù„Ø®Ø¨Ø±:</label>
                        <textarea id="newsDescription" name="description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="newsImage">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:</label>
                        <input type="url" id="newsImage" name="image" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="newsType">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¨Ø±:</label>
                        <select id="newsType" name="type">
                            <option value="Ø¥Ø·Ù„Ø§Ù‚">Ø¥Ø·Ù„Ø§Ù‚</option>
                            <option value="Ù…Ø³Ø§Ø¨Ù‚Ø©">Ù…Ø³Ø§Ø¨Ù‚Ø©</option>
                            <option value="ØªØ³Ø¬ÙŠÙ„">ØªØ³Ø¬ÙŠÙ„</option>
                            <option value="Ø¨ÙˆØ¯ÙƒØ§Ø³Øª">Ø¨ÙˆØ¯ÙƒØ§Ø³Øª</option>
                            <option value="Ø¥Ø¹Ù„Ø§Ù†">Ø¥Ø¹Ù„Ø§Ù†</option>
                            <option value="ØªØ­Ø¯ÙŠØ«">ØªØ­Ø¯ÙŠØ«</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¨Ø±</button>
                </form>
            </div>

            <div id="newsMessage" class="message" style="display: none;"></div>

            <div class="data-list">
                <h3 style="padding: 1.5rem; border-bottom: 1px solid var(--light-gray); margin: 0;">Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
                <div id="newsList">
                    <!-- Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>
        </div>

        <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ø³ÙŠØªÙ… Ø¥ÙƒÙ…Ø§Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹) -->
        <div id="courses" class="tab-content">
    <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</h2>
    
    <div class="form-container">
        <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯</h3>
        <form id="courseForm">
            <div class="form-group">
                <label for="courseLanguage">Ø§Ù„Ù„ØºØ©:</label>
                <select id="courseLanguage" name="language" required>
                    <option value="english">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
                    <option value="german">Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©</option>
                    <option value="french">Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</option>
                </select>
            </div>
            <div class="form-group">
                <label for="courseLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                <input type="text" id="courseLevel" name="level" placeholder="A1, A2, B1, ..." required>
            </div>
            <div class="form-group">
                <label for="courseTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                <input type="text" id="courseTitle" name="title" required>
            </div>
            <div class="form-group">
                <label for="courseDescription">ÙˆØµÙ Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                <textarea id="courseDescription" name="description" required></textarea>
            </div>
            <div class="form-group">
                <label for="courseYoutubeLink">Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨:</label>
                <input type="url" id="courseYoutubeLink" name="youtubeLink">
            </div>
            <div class="form-group">
                <label for="courseTelegramGroup">Ø±Ø§Ø¨Ø· Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù…:</label>
                <input type="url" id="courseTelegramGroup" name="telegramGroup">
            </div>
            <div class="form-group">
                <label for="courseImage">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:</label>
                <input type="url" id="courseImage" name="image" placeholder="https://example.com/image.jpg">
            </div>
            <div class="form-group">
                <label for="courseStatus">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                <select id="courseStatus" name="status">
                    <option value="Ù…ÙƒØªÙ…Ù„">Ù…ÙƒØªÙ…Ù„</option>
                    <option value="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ²">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ²</option>
                    <option value="Ù‚Ø±ÙŠØ¨Ø§Ù‹">Ù‚Ø±ÙŠØ¨Ø§Ù‹</option>
                    <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±">Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰</button>
        </form>
    </div>

    <div id="coursesMessage" class="message" style="display: none;"></div>

    <div class="data-list">
        <h3 style="padding: 1.5rem; border-bottom: 1px solid var(--light-gray); margin: 0;">Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
        <div id="coursesList">
            <!-- Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
        </div>
    </div>
        </div>        
        <div id="lessons" class="tab-content">
    <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
    
    <div class="form-container">
        <h3>Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h3>
        <form id="lessonForm">
            <div class="form-group">
                <label for="lessonLanguage">Ø§Ù„Ù„ØºØ©:</label>
                <select id="lessonLanguage" name="language" required>
                    <option value="english">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
                    <option value="german">Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©</option>
                    <option value="french">Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</option>
                </select>
            </div>
            <div class="form-group">
                <label for="lessonLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                <input type="text" id="lessonLevel" name="level" placeholder="A1, A2, B1, ..." required>
            </div>
            <div class="form-group">
                <label for="lessonTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³:</label>
                <input type="text" id="lessonTitle" name="title" required>
            </div>
            <div class="form-group">
                <label for="lessonDescription">ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³:</label>
                <textarea id="lessonDescription" name="description" required></textarea>
            </div>
            <div class="form-group">
                <label for="lessonYoutubeLink">Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨:</label>
                <input type="url" id="lessonYoutubeLink" name="youtubeLink" required>
            </div>
            <div class="form-group">
                <label for="lessonImage">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©:</label>
                <input type="url" id="lessonImage" name="image" placeholder="https://example.com/image.jpg">
            </div>
            <div class="form-group">
                <label for="lessonDuration">Ù…Ø¯Ø© Ø§Ù„Ø¯Ø±Ø³:</label>
                <input type="text" id="lessonDuration" name="duration" placeholder="15:30" required>
            </div>
            <div class="form-group">
                <label for="lessonOrder">ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯Ø±Ø³:</label>
                <input type="number" id="lessonOrder" name="order" value="1" min="1">
            </div>
            <button type="submit" class="btn btn-primary">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±Ø³</button>
        </form>
    </div>

    <div id="lessonsMessage" class="message" style="display: none;"></div>

    <div class="data-list">
        <h3 style="padding: 1.5rem; border-bottom: 1px solid var(--light-gray); margin: 0;">Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
        <div id="lessonsList">
            <!-- Ø§Ù„Ø¯Ø±ÙˆØ³ ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
        </div>
    </div>
        </div>        
        <div id="notifications" class="tab-content">
            <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
            <p>Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª...</p>
        </div>
    </div>

    <script>
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
        const newsForm = document.getElementById('newsForm');
        const newsList = document.getElementById('newsList');
        const newsMessage = document.getElementById('newsMessage');

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', loadNews);

        // Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯
        newsForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const newsData = {
                title: formData.get('title'),
                description: formData.get('description'),
                image: formData.get('image') || 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&h=250&fit=crop',
                type: formData.get('type'),
                date: new Date().toISOString().split('T')[0],
                urgent: false
            };

            try {
                const response = await fetch('/admin/api/news', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(newsData)
                });

                const result = await response.json();
                
                if (result.success) {
                    showMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    newsForm.reset();
                    loadNews();
                } else {
                    showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¨Ø±', 'error');
                }
            } catch (error) {
                showMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
        async function loadNews() {
            try {
                const response = await fetch('/admin/api/news');
                const news = await response.json();
                
                newsList.innerHTML = '';
                
                if (news.length === 0) {
                    newsList.innerHTML = '<div class="data-item"><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø¨Ø§Ø±</p></div>';
                    return;
                }

                news.forEach(item => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'data-item';
                    newsItem.innerHTML = `
                        <div class="data-content">
                            <h4>${item.title}</h4>
                            <p>${item.description}</p>
                            <div class="data-meta">
                                ${item.date} â€¢ ${item.type}
                            </div>
                        </div>
                        <div class="data-actions">
                            <button class="btn btn-danger" onclick="deleteNews(${item.id})">Ø­Ø°Ù</button>
                        </div>
                    `;
                    newsList.appendChild(newsItem);
                });
            } catch (error) {
                console.error('Error loading news:', error);
            }
        }

        // Ø­Ø°Ù Ø®Ø¨Ø±
        async function deleteNews(id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø±ØŸ')) return;

            try {
                const response = await fetch(`/admin/api/news/${id}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                
                if (result.success) {
                    showMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    loadNews();
                } else {
                    showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ø®Ø¨Ø±', 'error');
                }
            } catch (error) {
                showMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        }
                // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª
        const courseForm = document.getElementById('courseForm');
        const coursesList = document.getElementById('coursesList');
        const coursesMessage = document.getElementById('coursesMessage');

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³
        const lessonForm = document.getElementById('lessonForm');
        const lessonsList = document.getElementById('lessonsList');
        const lessonsMessage = document.getElementById('lessonsMessage');

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            loadNews();
            loadCourses();
            loadLessons();
        });

        // Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ±Ø³ Ø¬Ø¯ÙŠØ¯
        courseForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const courseData = {
                language: formData.get('language'),
                level: formData.get('level'),
                title: formData.get('title'),
                description: formData.get('description'),
                youtubeLink: formData.get('youtubeLink') || '#',
                telegramGroup: formData.get('telegramGroup') || '#',
                image: formData.get('image') || 'https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=400&h=300&fit=crop',
                status: formData.get('status')
            };

            try {
                const response = await fetch('/admin/api/courses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(courseData)
                });

                const result = await response.json();
                
                if (result.success) {
                    showCourseMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    courseForm.reset();
                    loadCourses();
                } else {
                    showCourseMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰', 'error');
                }
            } catch (error) {
                showCourseMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª
        async function loadCourses() {
            try {
                const response = await fetch('/admin/api/courses');
                const courses = await response.json();
                
                coursesList.innerHTML = '';
                
                if (Object.keys(courses).length === 0) {
                    coursesList.innerHTML = '<div class="data-item"><p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙˆØ±Ø³Ø§Øª</p></div>';
                    return;
                }

                for (const [language, levels] of Object.entries(courses)) {
                    for (const [level, course] of Object.entries(levels)) {
                        const courseItem = document.createElement('div');
                        courseItem.className = 'data-item';
                        courseItem.innerHTML = `
                            <div class="data-content">
                                <h4>${course.title} (${getLanguageName(language)} - ${level})</h4>
                                <p>${course.description}</p>
                                <div class="data-meta">
                                    Ø§Ù„Ø­Ø§Ù„Ø©: ${course.status} | 
                                    ÙŠÙˆØªÙŠÙˆØ¨: ${course.youtubeLink !== '#' ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'} | 
                                    ØªÙ„Ø¬Ø±Ø§Ù…: ${course.telegramGroup !== '#' ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}
                                </div>
                            </div>
                            <div class="data-actions">
                                <button class="btn btn-danger" onclick="deleteCourse('${language}', '${level}')">Ø­Ø°Ù</button>
                            </div>
                        `;
                        coursesList.appendChild(courseItem);
                    }
                }
            } catch (error) {
                console.error('Error loading courses:', error);
            }
        }

        // Ø­Ø°Ù ÙƒÙˆØ±Ø³
        async function deleteCourse(language, level) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŸ')) return;

            try {
                const response = await fetch(`/admin/api/courses/${language}/${level}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                
                if (result.success) {
                    showCourseMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    loadCourses();
                } else {
                    showCourseMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªÙˆÙ‰', 'error');
                }
            } catch (error) {
                showCourseMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯
        lessonForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const lessonData = {
                language: formData.get('language'),
                level: formData.get('level'),
                title: formData.get('title'),
                description: formData.get('description'),
                youtubeLink: formData.get('youtubeLink'),
                image: formData.get('image') || 'https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=400&h=250&fit=crop',
                duration: formData.get('duration'),
                order: formData.get('order')
            };

            try {
                const response = await fetch('/admin/api/lessons', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(lessonData)
                });

                const result = await response.json();
                
                if (result.success) {
                    showLessonMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    lessonForm.reset();
                    loadLessons();
                } else {
                    showLessonMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±Ø³', 'error');
                }
            } catch (error) {
                showLessonMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³
        async function loadLessons() {
            try {
                const response = await fetch('/admin/api/lessons');
                const lessons = await response.json();
                
                lessonsList.innerHTML = '';
                
                if (Object.keys(lessons).length === 0) {
                    lessonsList.innerHTML = '<div class="data-item"><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³</p></div>';
                    return;
                }

                for (const [language, levels] of Object.entries(lessons)) {
                    for (const [level, levelLessons] of Object.entries(levels)) {
                        levelLessons.forEach(lesson => {
                            const lessonItem = document.createElement('div');
                            lessonItem.className = 'data-item';
                            lessonItem.innerHTML = `
                                <div class="data-content">
                                    <h4>${lesson.title} (${getLanguageName(language)} - ${level})</h4>
                                    <p>${lesson.description}</p>
                                    <div class="data-meta">
                                        Ø§Ù„Ù…Ø¯Ø©: ${lesson.duration} | Ø§Ù„ØªØ±ØªÙŠØ¨: ${lesson.order}
                                    </div>
                                </div>
                                <div class="data-actions">
                                    <button class="btn btn-danger" onclick="deleteLesson('${language}', '${level}', ${lesson.id})">Ø­Ø°Ù</button>
                                </div>
                            `;
                            lessonsList.appendChild(lessonItem);
                        });
                    }
                }
            } catch (error) {
                console.error('Error loading lessons:', error);
            }
        }

        // Ø­Ø°Ù Ø¯Ø±Ø³
        async function deleteLesson(language, level, id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ØŸ')) return;

            try {
                const response = await fetch(`/admin/api/lessons/${language}/${level}/${id}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                
                if (result.success) {
                    showLessonMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    loadLessons();
                } else {
                    showLessonMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ø¯Ø±Ø³', 'error');
                }
            } catch (error) {
                showLessonMessage('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±', 'error');
            }
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª
        function showCourseMessage(message, type) {
            coursesMessage.textContent = message;
            coursesMessage.className = `message ${type}`;
            coursesMessage.style.display = 'block';
            
            setTimeout(() => {
                coursesMessage.style.display = 'none';
            }, 5000);
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¯Ø±ÙˆØ³
        function showLessonMessage(message, type) {
            lessonsMessage.textContent = message;
            lessonsMessage.className = `message ${type}`;
            lessonsMessage.style.display = 'block';
            
            setTimeout(() => {
                lessonsMessage.style.display = 'none';
            }, 5000);
        }

        // ØªØ­ÙˆÙŠÙ„ ÙƒÙˆØ¯ Ø§Ù„Ù„ØºØ© Ø¥Ù„Ù‰ Ø§Ø³Ù…
        function getLanguageName(langCode) {
            const languages = {
                'english': 'Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©',
                'german': 'Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©',
                'french': 'Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©'
            };
            return languages[langCode] || langCode;
        }
        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function showMessage(message, type) {
            newsMessage.textContent = message;
            newsMessage.className = `message ${type}`;
            newsMessage.style.display = 'block';
            
            setTimeout(() => {
                newsMessage.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>